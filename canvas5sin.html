<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Canvas triangle 5center</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <canvas width="1024" height="768">
    Canvas not supported.
  </canvas>

  <script>
	  'use strict';

{
	let t=0;

  function draw() {
    const canvas = document.querySelector('canvas');
    if (typeof canvas.getContext === 'undefined') {
      return;
    }
    const ctx = canvas.getContext('2d');


//解像度
const CANVAS_WIDTH=1024;
const CANVAS_HEIGHT=768;
const dpr =window.devicePixelRatio || 1;
canvas.width=CANVAS_WIDTH*dpr;
canvas.height=CANVAS_HEIGHT*dpr;

ctx.scale(dpr,dpr);
canvas.style.width=CANVAS_WIDTH+'px';
canvas.style.height=CANVAS_HEIGHT+'px';


/*
var items = [1,2,3,4];

//配列「items」に数値データを追加する
items.push(5);

alert( items[2] );
*/

var zahyou=[];

function onClick(e) {

  var x = e.clientX - canvas.offsetLeft;
  var y = e.clientY - canvas.offsetTop;
  zahyou.push(x);
  zahyou.push(y);

//三角形描画

	ctx.moveTo(zahyou[0], zahyou[1]);
    ctx.lineTo(zahyou[2], zahyou[3]);
    ctx.lineTo(zahyou[4], zahyou[5]);
    //ctx.lineTo(zahyou[0], zahyou[1]);

    ctx.closePath();
    ctx.fillStyle='skyblue';
    ctx.stroke();
    ctx.strokeStyle="black";




/*

//triangle RANDOM
    ctx.beginPath();

	var www=1024-768;
    var zahyou[0]=Math.random()*www;
    var zahyou[1]=Math.random()*www;
    var zahyou[2]=Math.random()*www;
    var zahyou[3]=Math.random()*www;
    var zahyou[4]=Math.random()*www;
    var zahyou[5]=Math.random()*www;
*/

// //三角形描画
// alert(zahyou[0]);
//     ctx.moveTo(zahyou[0],zahyou[1]);
//     ctx.lineTo(zahyou[2],zahyou[3]);
//     ctx.lineTo(zahyou[4],zahyou[5]);
//     //ctx.lineTo(zahyou[0], zahyou[1]);
//     ctx.closePath();
//     ctx.fillStyle='skyblue';
//     ctx.stroke();

// //三角形描画
// //alert(zahyou);
// ctx.moveTo(zahyou[0], zahyou[1]);
//     ctx.lineTo(zahyou[2], zahyou[3]);
//     ctx.lineTo(zahyou[4], zahyou[5]);
//     //ctx.lineTo(zahyou[0], zahyou[1]);
//     ctx.closePath();
//     ctx.fillStyle='skyblue';
//     ctx.stroke();

/*

//直角三角形
    var zahyou[0]=0;
    var zahyou[1]=0;
    var zahyou[2]=0+30;
    var zahyou[3]=0;
    var zahyou[4]=0+0;
    var zahyou[5]=0+40;

//正三角形
    var zahyou[0]=200;
    var zahyou[1]=200;
    var zahyou[2]=200+100;
    var zahyou[3]=200;
    var zahyou[4]=200+50;
    var zahyou[5]=200-50*Math.pow(3,1/2);
*/



    // ctx.moveTo(zahyou[0], zahyou[1]);
    // ctx.lineTo(zahyou[2], zahyou[3]);
    // ctx.lineTo(zahyou[4], zahyou[5]);
    // ctx.fillStyle='skyblue';
    // ctx.fill();

//３辺の長さ
    var c=Math.pow(Math.pow(zahyou[0]-zahyou[2],2)+Math.pow(zahyou[1]-zahyou[3],2),1/2);
    var a=Math.pow(Math.pow(zahyou[2]-zahyou[4],2)+Math.pow(zahyou[3]-zahyou[5],2),1/2);
    var b=Math.pow(Math.pow(zahyou[4]-zahyou[0],2)+Math.pow(zahyou[5]-zahyou[1],2),1/2);
    //alert(a+","+b+","+c);
//三角形の面積
    var s=(a+b+c)/2;
    var S=Math.pow((s*(s-a)*(s-b)*(s-c)),1/2);
    //Math.pow(s*s,1/2);
//接円半径
	var r=(2*S)/(a+b+c);
	var R=(a*b*c)/(4*r*s)

//内心
	var x00=(a*zahyou[0]+b*zahyou[2]+c*zahyou[4])/(a+b+c);
	var y00=(a*zahyou[1]+b*zahyou[3]+c*zahyou[5])/(a+b+c);
//外心
	var x0O=(a*a*(b*b+c*c-a*a)*zahyou[0]+b*b*(c*c+a*a-b*b)*zahyou[2]+c*c*(a*a+b*b-c*c)*zahyou[4])/(16*S*S)
	var y0O=(a*a*(b*b+c*c-a*a)*zahyou[1]+b*b*(c*c+a*a-b*b)*zahyou[3]+c*c*(a*a+b*b-c*c)*zahyou[5])/(16*S*S)
//垂心
	var thetaA=Math.acos(((zahyou[2]-zahyou[0])*(zahyou[4]-zahyou[0])+(zahyou[3]-zahyou[1])*(zahyou[5]-zahyou[1]))/(b*c));
	var thetaB=Math.acos(((zahyou[4]-zahyou[2])*(zahyou[0]-zahyou[2])+(zahyou[5]-zahyou[3])*(zahyou[1]-zahyou[3]))/(c*a));
	var thetaC=Math.acos(((zahyou[0]-zahyou[4])*(zahyou[2]-zahyou[4])+(zahyou[1]-zahyou[5])*(zahyou[3]-zahyou[5]))/(a*b));

	var x0h=(Math.tan(thetaA)*zahyou[0]+Math.tan(thetaB)*zahyou[2]+Math.tan(thetaC)*zahyou[4])/(Math.tan(thetaA)+Math.tan(thetaB)+Math.tan(thetaC));
	var y0h=(Math.tan(thetaA)*zahyou[1]+Math.tan(thetaB)*zahyou[3]+Math.tan(thetaC)*zahyou[5])/(Math.tan(thetaA)+Math.tan(thetaB)+Math.tan(thetaC));

//重心
	var x0g=(zahyou[0]+zahyou[2]+zahyou[4])/3;
	var y0g=(zahyou[1]+zahyou[3]+zahyou[5])/3;

	ctx.moveTo(zahyou[0], zahyou[1]);
    ctx.lineTo(x0g, y0g);
    ctx.closePath();
    ctx.strokeStyle="blue";
    ctx.stroke();

	ctx.moveTo(zahyou[2], zahyou[3]);
    ctx.lineTo(x0g, y0g);
    ctx.closePath();
    ctx.strokeStyle="blue";
    ctx.stroke();

    ctx.moveTo(zahyou[4], zahyou[5]);
    ctx.lineTo(x0g, y0g);
    ctx.closePath();
    ctx.strokeStyle="blue";
    ctx.stroke();

//正円
//内接円
	ctx.beginPath();
	//ctx.arc(50,50,c ,0,2*Math.PI);//中心,中心,半径,start-中心角,end-中心角
	ctx.arc(x00,y00,r ,0,2*Math.PI);
	//ctx.closePath();
    ctx.strokeStyle="skyblue";
	ctx.stroke();
//外接円
	ctx.beginPath();
	ctx.arc(x0O,y0O,R ,0,2*Math.PI);
	ctx.strokeStyle="whitesmoke";
	ctx.stroke();

ctx.beginPath();
	ctx.moveTo(x00, y00);
    ctx.lineTo(x0O, y0O);
    ctx.strokeStyle="red";
    ctx.stroke();

ctx.beginPath();
    ctx.moveTo(x0O, y0O);
    ctx.lineTo(x0g, y0g);
    ctx.strokeStyle="yellow";
    ctx.stroke();

ctx.beginPath();
    ctx.moveTo(x00, y00);
    ctx.lineTo(x0g, y0g);
    ctx.strokeStyle="green";
    ctx.stroke();

ctx.beginPath();
    ctx.moveTo(x0g, y0g);
    ctx.lineTo(x0h, y0h);
    ctx.strokeStyle="orange";
    ctx.stroke();

ctx.beginPath();
    ctx.moveTo(x0h, y0h);
    ctx.lineTo(zahyou[0], zahyou[1]);
    ctx.strokeStyle="orange";
    ctx.stroke();

ctx.beginPath();
    ctx.moveTo(x0h, y0h);
    ctx.lineTo(zahyou[2], zahyou[3]);
    ctx.strokeStyle="orange";
    ctx.stroke();

ctx.beginPath();
    ctx.moveTo(x0h, y0h);
    ctx.lineTo(zahyou[4], zahyou[5]);
    ctx.strokeStyle="orange";
    ctx.stroke();

//alert(zahyou);
}


canvas.addEventListener('click', onClick, false);


  }

  draw();


}
  </script>
</body>
</html>
